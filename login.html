<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RatBook | Secure Login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: linear-gradient(135deg, #c5cfff 0%, #0033c0 100%); height: 100vh; display: flex; justify-content: center; align-items: center; font-family: sans-serif; }
        .card { width: 100%; max-width: 400px; padding: 40px; border-radius: 15px; box-shadow: 10 15px 30px rgba(0, 228, 209, 0.2); background: rgba(255,255,255,0.95); }
    </style>
</head>
<body>
    <div class="card">
        <div class="text-center mb-4">
            <div class="d-flex justify-content-center align-items-center gap-3">
                <img src="{{ url_for('static', filename='logo_ratbook.jpg') }}" 
                    alt="Logo RatBook" 
                    style="width: 85px; height: auto; object-fit: contain;">
            </div>
            <p class="text-muted small mt-2">Sistem Akuntansi Peternakan Tikus Putih</p>
        </div>

        {% if error %} <div class="alert alert-danger small">{{ error }}</div> {% endif %}
        {% if success %} <div class="alert alert-success small">{{ success }}</div> {% endif %}

        <div class="d-flex justify-content-center mb-3">
            <button class="btn btn-sm btn-primary rounded-pill me-2 px-4" id="btnToLogin" onclick="mode('login')">Login</button>
            <button class="btn btn-sm btn-outline-primary rounded-pill px-4" id="btnToReg" onclick="mode('register')">Daftar</button>
        </div>

        <form method="POST" id="fLogin">
            <input type="hidden" name="form_type" value="login">
            <div class="mb-3">
                <label class="small fw-bold">Email / Username</label>
                <input type="text" name="email" class="form-control" required placeholder="admin@ratbook.com">
            </div>
            <div class="mb-3">
                <label class="small fw-bold">Password</label>
                <input type="password" name="password" class="form-control" required>
            </div>
            <button class="btn btn-primary w-100 py-2 fw-bold">Masuk</button>
        </form>

        <form method="POST" id="fReg" style="display:none;">
            <input type="hidden" name="form_type" value="register">
            <div class="mb-3">
                <label class="small fw-bold">Email Aktif</label>
                <input type="email" name="email" class="form-control" required>
            </div>
            <div class="mb-3">
                <label class="small fw-bold">Username</label>
                <input type="text" name="new_username" class="form-control" required>
            </div>
            <div class="mb-3">
                <label class="small fw-bold">Password</label>
                <input type="password" name="new_password" class="form-control" required>
            </div>
            <button class="btn btn-success w-100 py-2 fw-bold">Buat Akun</button>
        </form>
    </div>

    <script>
        function mode(t) {
            document.getElementById('fLogin').style.display = t==='login'?'block':'none';
            document.getElementById('fReg').style.display = t==='register'?'block':'none';
            document.getElementById('btnToLogin').className = t==='login'?'btn btn-sm btn-primary rounded-pill me-2 px-4':'btn btn-sm btn-outline-primary rounded-pill me-2 px-4';
            document.getElementById('btnToReg').className = t==='register'?'btn btn-sm btn-primary rounded-pill px-4':'btn btn-sm btn-outline-primary rounded-pill px-4';
        }
    </script>
</body>
</html>